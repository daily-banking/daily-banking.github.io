(()=>{"use strict";const e=(e,t,n)=>{let i,o;e.addEventListener("wheel",(e=>{if(e.deltaX<-10){if(i)return window.clearTimeout(i),void(i=window.setTimeout((()=>{i=void 0}),50));t(),o=void 0,i=window.setTimeout((()=>{i=void 0}),50)}if(e.deltaX>10){if(o)return window.clearTimeout(o),void(o=window.setTimeout((()=>{o=void 0}),50));n(),i=void 0,o=window.setTimeout((()=>{o=void 0}),50)}}))},t=e=>[...new Array(e).keys()],n=window.matchMedia("(min-width: 800px)"),i=document.querySelector("section.events"),o=i.querySelector("ul.bar"),s=i.querySelector(".container"),d=s.querySelectorAll(".card"),c=s.querySelector(".card-placeholder"),r=s.querySelector(".picture"),a=i.querySelector(".pagination"),l=a.querySelector("button.left"),h=a.querySelector("button.right"),u=a.querySelector(".page-number"),m=[...Array(d.length)].map((e=>document.createElement("li")));let y=0;const g=()=>{m.forEach(((e,t)=>{switch(!0){case t===y:e.dataset.class="active";break;case 1===Math.abs(t-y):e.dataset.class="near";break;default:e.dataset.class="far"}}))},v=()=>{const e=d[y],t=getComputedStyle(e),i=Number.parseInt(t.height,10),o=d[y].querySelector(".content"),s=o.offsetHeight;d.forEach(((e,t)=>{t===y?e.classList.remove("hidden"):e.classList.add("hidden")})),n.matches?(o.dataset.overflow=s>=i?"auto":"hidden",c.style.removeProperty("height")):(o.dataset.overflow="hidden",c.style.setProperty("height",`${s+96}px`)),r.dataset.index=y},w=()=>{u.innerText=`${y+1} из ${d.length}`,y<=0&&l.classList.add("hidden"),y>0&&l.classList.remove("hidden"),y>=d.length-1&&h.classList.add("hidden"),y<d.length-1&&h.classList.remove("hidden")},p=()=>{y<=0||(y-=1,g(),v(),w())},f=()=>{y>=d.length-1||(y+=1,g(),v(),w())},L=document.querySelector("section.recommendations"),S=L.querySelector(".container"),q=L.querySelectorAll(".card"),b=L.querySelectorAll(".thumbnail");let x=0;const E=window.matchMedia("(min-width: 800px)"),T=window.matchMedia("(min-width: 1224px)");let k=0;const $=new ResizeObserver((e=>{window.clearTimeout(k),k=window.setTimeout((()=>{const n=e.find((e=>e.target===S));n&&(e=>{x=e.contentRect.width;for(const e in t(q.length)){const t=q[e];t&&(t.classList.contains("hidden")?M(e):t.style.setProperty("width",`${x}px`))}})(n)}),250)})),A=()=>{E.matches?$.observe(S):$.unobserve(S)},M=e=>{const t=q[e],n=b[e];if(t&&n){const i=n.getBoundingClientRect(),o=n.offsetTop-253,s=T.matches?0:i.left-32,d=e%2==0?0:i.width+64,c=T.matches?d:0;t.style.cssText=`\n      left: ${s}px;\n      top: ${o}px;\n      margin-left: ${c}px;\n      width: ${i.width}px;\n      height: ${i.height}px;\n      opacity: 0;\n    `}},C=e=>{const n=q[e];if(n){for(const e in t(q.length))P(e);n.classList.remove("hidden"),window.setTimeout((()=>{(e=>{const t=q[e],n=b[e];if(t&&n){const e=T.matches?0:n.offsetTop-253;t.style.cssText=`\n      left: 0;\n      top: ${e}px;\n      margin-left: 0;\n      width: ${x}px;\n      height: 696px;\n      opacity: 1;\n    `}})(e)}),0)}},P=e=>{const t=q[e];t&&!t.classList.contains("hidden")&&(M(e),setTimeout((()=>{t.classList.add("hidden")}),250))},I=window.matchMedia("(min-width: 800px)"),R=document.querySelector("section.advices"),B=R.querySelector(".container"),H=B.querySelectorAll(".card"),N=B.querySelector(".card-placeholder"),O=B.querySelector(".picture"),X=R.querySelector(".pagination"),z=X.querySelector("button.left"),D=X.querySelector("button.right");let j=0;const F=()=>{const e=H[j],t=getComputedStyle(e),n=Number.parseInt(t.height,10),i=H[j].querySelector(".content"),o=i.offsetHeight;H.forEach(((e,t)=>{t===j?e.classList.remove("hidden"):e.classList.add("hidden")})),I.matches?(i.dataset.overflow=o>=n?"auto":"hidden",N.style.removeProperty("height")):(i.dataset.overflow="hidden",N.style.setProperty("height",`${o+48}px`)),O.dataset.index=j},G=()=>{j<=0&&z.classList.add("hidden"),j>0&&z.classList.remove("hidden"),j>=H.length-1&&D.classList.add("hidden"),j<H.length-1&&D.classList.remove("hidden")},J=()=>{j<=0||(j-=1,F(),G())},K=()=>{j>=H.length-1||(j+=1,F(),G())};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const e=document.getElementById("navToggle");if(!e)return;const t=document.querySelector("section.title");e.addEventListener("click",(()=>{t.classList.toggle("mobile-nav-visible")}))})(),setTimeout((()=>{o.replaceChildren(...m),g(),v(),w(),n.addEventListener("change",v),l.addEventListener("click",p),h.addEventListener("click",f),e(i,p,f),a.classList.remove("hidden"),(()=>{console.log("recommendation init"),A(),E.addEventListener("change",A);for(const e in t(q.length))M(e),q[e].classList.add("hidden"),q[e].querySelector("button").addEventListener("click",(()=>{P(e)})),b[e].querySelector("button").addEventListener("click",(()=>{C(e)}));const e=S.querySelector(".cards");e&&(e.style.display="block")})(),F(),G(),I.addEventListener("change",F),z.addEventListener("click",J),D.addEventListener("click",K),e(R,J,K),X.classList.remove("hidden")}),100),document.querySelectorAll("footer .row").forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("opened")}))}))}))})();